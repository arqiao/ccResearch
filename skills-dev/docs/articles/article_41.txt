标题: n8n已死？教你把工作流无损“内化”为 Claude 原生Skills
日期: 20260121
原文: https://mp.weixin.qq.com/s/WNDRJ4s-xSWpT3RtD8IUgA

 id="js_content" style="visibility: hidden; opacity: 0; "> 过去，n8n 是我们心中的自动化神器：可视化、模块化、连接一切。 当我把一套运行良好的「微信公众号监控」从 n8n 迁移给 Claude Skills后，我意识到： 对于 Agent 来说，可视化的工作流可能真的要过时了。 本文将以实战为例，教你如何完成这次“无损内化”。 为什么要抛弃 n8n 选择 Claude Skills？ 这是一个关于“外挂”与“内功”的区别： n8n 工作流(外挂): 就像给 AI 配了一台复杂的精密仪器。它很强大，但笨重。你得担心服务器会不会挂、Token 会不会过期、Webhook 响应慢不慢。 它是“身外之物”。 Claude Skills(内功): 这是把逻辑直接写进 AI 的肌肉记忆里。不需要额外的服务器资源，代码与 AI 同在。 它是“原生组织”。 当我把监控系统迁移完成后，最大的感受不是“功能变强了”，而是“负担消失了”。 迁移的核心方法论 整个迁移过程可以抽象为 "解构-映射-重构" 三步走： 第一步：解构 n8n 工作流 首先要理解原工作流在做什么。以公众号监控为例，n8n 工作流包含以下节点： 节点类型 功能 对应能力 HTTP Request 获取订阅账号列表 API 调用 Code 提取账号 ID 数据处理 Split Out 拆分数据项 循环迭代 HTTP Request 查询文章内容 API 调用 Filter 过滤空结果 条件判断 Code (Python) HTML 转 Markdown 文本处理 LLM Agent AI 生成摘要 AI 能力 Feishu Node 存入飞书表格 数据存储 关键洞察： 每个 n8n 节点都对应一个原子能力 ，迁移的本质是用 Python/JS 代码重新实现这些能力。 第二步：映射技术栈 n8n 节点到 Claude Skill 的映射关系： n8n 节点 Claude Skill 实现 HTTP Request requests.get() / requests.post() Code (JS/Python) 原生 Python 函数 Split Out / Loop Python for 循环 Filter if 条件判断 LLM Agent 调用 OpenAI 兼容 API 数据存储节点 各平台 API (飞书、Notion 等) 第三步：重构为 Skill 结构 Claude Skill 有固定的文件结构： skills /wechat-account-monitoring/ ├── SKILL.md # 技能说明（触发词、使用方法） ├── monitor.py # 核心逻辑（Python 实现） ├── config.json # 配置文件（API 密钥等） ├── config.example.json # 配置模板 └── requirements.txt # Python 依赖 SKILL.md 是技能的"说明书"，告诉 Claude 何时、如何使用这个技能。 实战：公众号监控技能的诞生 让我用实际案例展示这个过程。 原始 n8n 工作流 这是一个典型的自动化监控流程： • 触发器 ：手动/定时触发 • 数据获取 ：从订阅服务拉取公众号列表 • 内容抓取 ：循环查询每个账号的最新文章 • 内容处理 ：HTML 转 Markdown，AI 生成摘要 • 数据存储 ：写入飞书多维表格 迁移后的 Skill 架构 1. 配置层 (config.json) 将所有敏感信息和可配置项抽离： { "account_list" : { "api_url" : "https://your-service.app" , "api_key" : "your-token" } , "article_query" : { "api_url" : "https://your-service.app" , "api_key" : "your-token" } , "feishu" : { "app_id" : "cli_xxx" , "app_secret" : "xxx" , "app_token" : "xxx" , "table_id" : "tbl_xxx" } } 2. 核心逻辑层 (monitor.py) 每个 n8n 节点对应一个 Python 函数： def fetch_account_list ( config ): """对应 n8n 的 HTTP Request 节点""" url = f" {config[ #x27 ;api_url #x27 ; ]} /list?k= {config[ #x27 ;api_key #x27 ; ]} " response = requests.get(url) return [entry[ "id" ] for entry in response.json()[ "data" ]] def html_to_markdown ( html_content ): """对应 n8n 的 Python Code 节点""" # 移除 script/style 标签 # 转换标题、段落、列表 # 处理图片和链接 return markdown_content def save_to_feishu ( article, access_token, config ): """对应 n8n 的 Feishu 节点""" url = f"https://open.feishu.cn/open-apis/bitable/v1/..." requests.post(url, headers=headers, json=payload) 3. 技能声明层 (SKILL.md) 告诉 Claude 这个技能的用途和触发方式： --- name: wechat-account-monitoring description: "监控微信公众号文章，自动抓取、转换、存储到飞书" --- ## 触发方式 - `/wechat-account-monitoring` - "帮我监控公众号" - `/wechat-account-monitoring --days 3` 迁移过程中的关键挑战与解决方案 挑战一：API 端点不一致 问题 ：n8n 工作流中 account_list 和 article_query 使用不同的服务地址。 根因分析 ：通过查看 Zeabur 部署的环境变量，发现两个 API 实际上是同一个 wechat2rss 服务的不同端点。 解决方案 ：统一 api_url 和 api_key ，指向同一服务。 挑战二：重复数据问题 问题 ：多次运行会产生重复记录。 根因分析 ：n8n 工作流也没有去重逻辑，只是运行频率低所以问题不明显。 解决方案 ：新增 get_existing_urls() 函数，在保存前查询已存在的文章 URL，自动跳过重复项。 def get_existing_urls ( access_token, config ): """查询飞书表格中已存在的文章 URL""" existing_urls = set () # 分页查询所有记录 # 提取 URL 字段 return existing_urls 挑战三：Windows 兼容性 问题 ：Python 脚本在 Windows 终端输出乱码。 根因分析 ：Windows 默认使用 GBK 编码，无法显示 Unicode 字符（如 ✓）。 解决方案 ：添加编码修复代码： if sys.platform == "win32" : sys.stdout = io.TextIOWrapper( sys.stdout.buffer, encoding= #x27 ;utf-8 #x27 ; , errors= #x27 ;replace #x27 ; ) 迁移方法论总结 很多人不敢放弃 n8n 是因为不懂代码，但其实有了 Claude 之后， 写代码反而是最简单的一环 。你只需要负责设计逻辑，代码让 Claude 写。 通过这次实践，我提炼出一套可复用的迁移方法论： 适合迁移的工作流特征 不是所有 n8n 工作流都适合迁移，以下特征的工作流迁移价值最高： • 触发频率低 ：每天/每周执行一次 • 对话场景相关 ：用户可能在对话中触发 • 无需实时响应 ：可以接受几秒到几分钟的延迟 • 依赖可访问 API ：所有外部服务都有 HTTP API n8n 最后的防线：哪些场景暂时还离不开它？ • 需要 Webhook 实时触发的工作流 • 需要持续运行的监控任务 • 涉及复杂分支逻辑的工作流 • 依赖 n8n 特有节点的工作流 迁移后的价值 完成迁移后，我获得了以下好处： 1. 随叫随到 不再需要登录 n8n 后台手动触发，直接对 Claude 说 /wechat-account-monitoring --days 3 即可。 2. 零运维成本 不需要单独部署 n8n 服务器，Skill 作为本地文件存在，随 Claude Code 一起运行。 3. 可扩展性 可以轻松添加新功能，比如我后来加入了去重逻辑，这在 n8n 中需要更复杂的节点组合。 4. 版本控制 代码化的 Skill 可以纳入 Git 管理，追踪每次改动。 结语：n8n 真的死透了吗？ 当然没有！ 但对于 个人开发者 和 Agent 创作者 来说， “为了连通两个 API 而去部署一套 n8n”的时代，确实已经死了。 从 n8n 到 Claude Skills 的迁移，本质上是从「可视化编排」到「代码化能力」的转变，是我们对自动化理解的进化： n8n 思维 ：我搭建了一条流水线，它在某服务器上 24/7 运行。 Skill 思维 ：我赋予了 AI 一项新技能，它静静地躺在代码库里， 随叫随到，用完即走。 当你把自动化能力「内化」给 AI，你获得的不仅是技术上的便利，更是与 AI 协作方式的进化。 别守着旧工具了。把你最好的工作流找出来，试着把它变成 Claude 的一部分吧。 我是 Jason，来自「 SuperAI编程 」 。 在评论区告诉我，说不定下一篇，我们就一起共创你的Skills 🚀 如果本文内容对您有启发，欢迎点个【赞】、【在看】或【转发】支持一下；也可以加个 星标 ⭐ 一起进入下面群聊 ，第一时间收到更多实战案例。 
