# OpenClaw 虚拟机部署指南：2 种方案从入门到生产
# URL: https://mp.weixin.qq.com/s/Y-Wh4RshmkYuBQ8QMv42zg
# 日期: 2026-02-04
# 来源: 微信-小野AI探索之旅
# 分类: 产品认知 / 
# 字数: 9709

想拥有自己的JARVIS，但本地部署总遇到环境问题？
关机就断线，出差用不了，每次重新配置都崩溃？
这篇文章帮你10分钟搞定云端部署，让你的AI助理24/7永不断线！
📌 读完全文，你将获得：
✅ 2种主流部署方案的完整步骤
✅ 新手友好的保姆级教程（跟着做就能成）
✅ 生产环境的最佳实践
✅ 5年踩坑经验总结的故障排查（省你100小时）
✅ 安全配置完整指南（保护你的AI助理）
💡 为什么选择虚拟机部署？
想象一下：
❌ 本地部署 = 把JARVIS锁在房间里
关电脑，JARVIS就失联
出差在外，访问不了
团队想用，只有你的电脑能用
✅ 虚拟机部署 = 给JARVIS一个云端基地
24/7永不断线，随时待命
全球任意访问，出差也能用
团队共享协作，多人同时用
这就是区别！
架构对比：本地 vs 云端
❌ 本地部署架构：
你的电脑 ──→ OpenClaw → 关机失联
↓
出差访问不了
团队用不了
✅ 云端部署架构：
全球任意设备 ──→ 云服务器 ──→ OpenClaw ──→ 24/7在线
↓
团队共享
随处访问
核心区别
：本地部署=单机限制，云部署=全球基地！
优势
本地部署
虚拟机/云部署
24/7运行
关机就停
✅ 永不断线
随处访问
只在内网
✅ 全球访问
资源隔离
占用本地性能
✅ 不影响日常使用
多用户协作
困难
✅ 团队共享
数据安全
依赖单机
✅ 可快照备份
最适合人群：
🏢 企业团队（需要多人协作）
🌍 频繁出差人士（随时随地访问）
🔧 开发者（多环境测试）
💪 想要稳定运行的用户
🎯 快速决策表（建议收藏⭐）
你的需求
推荐方案
难度
预计时间
快速体验，不想折腾
方案一：安装脚本
⭐ 新手友好
10分钟
生产环境，多实例部署
方案二：Docker
⭐⭐ 需要Docker基础
15分钟
完全小白，想要一键
腾讯云镜像部署
⭐ 超简单
5分钟
💡 新手提示
：第一次部署推荐选方案一，熟悉后再尝试Docker！
💥 你是不是也遇到过这些崩溃时刻？
本地部署OpenClaw，结果：
💻 关电脑就断线，AI助理失联
🌍 出差在外，内网访问不了
🔄 换电脑了，又要重新配置一遍
👥 团队想一起用，结果只有你的电脑能用
💸 本地资源被占满，日常开发都卡
最扎心的是
：花了好久配置好，结果一次系统更新全白费！
本地部署 = 一次性配置，每次重来
云部署 = 一次性配置，终身受益
💡
🗺️ 部署流程一览
两种方案，任你选择：
准备环境 → 选择方案 → 安装部署 → 配置渠道 → ✅ 完成！
方案一（安装脚本）：适合新手，快速上手
├─ 安装 Node.js
├─ 一键安装 OpenClaw
├─ 配置环境变量
├─ 运行初始化向导
└─ 启动 Gateway
方案二（Docker）：适合生产，隔离性好
├─ 安装 Docker
├─ 克隆仓库
├─ 运行自动设置脚本
├─ 配置访问令牌
└─ 启动服务
预计时间
：10-15分钟搞定！ ⚡
方案一：安装脚本部署（推荐新手）⭐
这是最简单、最快速的方式，10分钟内完成部署！
❌ 不需要：
❌ 懂Docker
❌ 会写代码
❌ 有Linux基础
✅ 只需要：
✅ 能复制粘贴命令
✅ 按步骤执行
✅ 10分钟时间
📋 前置准备
虚拟机软件推荐：
VMware Workstation / VMware Fusion
VirtualBox（免费）
Parallels Desktop（macOS）
云服务器：腾讯云、阿里云、AWS、Oracle Cloud
系统要求：
操作系统：Linux（Ubuntu 22.04 / Debian 12 推荐）
内存：最低 2GB，推荐 4GB+
磁盘：10GB 可用空间
网络：稳定的互联网连接
小贴士
如果没有云服务器，腾讯云有免费试用活动，适合练手！
🚀 步骤 1：安装 Node.js 22
OpenClaw 需要 Node.js 22+ 版本。
Ubuntu/Debian：
# 更新系统
sudoapt update &&sudoapt upgrade -y
# 安装基础工具
sudoaptinstall-ycurlgitwget
# 安装 Node.js 22
curl-fsSL https://deb.nodesource.com/setup_22.x |sudo-Ebash -
sudoaptinstall-y nodejs
# 验证安装
node-v# 应显示 v22.x.x
npm-v
CentOS/RHEL：
sudo dnf update -y
sudo dnf install-ycurlgit
curl-fsSL https://rpm.nodesource.com/setup_22.x |sudobash -
sudo dnf install-y nodejs
🚀 步骤 2：一键安装 OpenClaw
# 下载并执行安装脚本
curl-fsSL https://openclaw.bot/install.sh |bash
高级选项（可选）：
# 非交互式安装（跳过向导）
curl-fsSL https://openclaw.bot/install.sh |bash-s -- --no-onboard
# 从源码安装
curl-fsSL https://openclaw.bot/install.sh |bash-s -- --install-method git
# 查看所有选项
curl-fsSL https://openclaw.bot/install.sh |bash-s -- --help
🚀 步骤 3：配置环境变量
如果提示找不到
openclaw
命令：
# 临时生效
exportPATH="$(npm prefix -g)/bin:$PATH"
# 永久生效（推荐）
echo'export PATH="$(npm prefix -g)/bin:$PATH"'>> ~/.bashrc
source ~/.bashrc
# 验证
which openclaw
openclaw --version
🚀 步骤 4：运行初始化向导
# 运行向导并安装 daemon
openclaw onboard --install-daemon
向导会询问：
选择模型提供商（OpenAI、Anthropic、等）
配置基础设置（语言、时区等）
设置消息渠道（可跳过，稍后配置）
🚀 步骤 5：启动 Gateway
# 启动服务
openclaw gateway start
# 查看日志（确认启动成功）
openclaw gateway logs --follow
看到以下日志表示启动成功：
[INFO] Gateway listening on 127.0.0.1:18792
[INFO] Control UI available at http://127.0.0.1:18789
🚀 步骤 6：访问控制面板
# 方式1：命令自动打开（会在浏览器打开）
openclaw dashboard
# 方式2：手动访问
# 浏览器打开：http://<虚拟机IP>:18789/
✅ 恭喜！部署完成！
效果对比：
| 项目 | 本地部署 | 虚拟机部署 |
|------|---------|-----------|
| 可用性 | 关机就停 | ✅ 24/7永不断线 |
| 访问范围 | 只在内网 | ✅ 全球任意访问 |
| 配置次数 | 每台电脑都要配 | ✅ 一次配置，永久使用 |
| 团队协作 | 困难 | ✅ 多人共享 |
🎉 从此，你的AI助理真正属于你了！
方案二：Docker 部署（推荐生产环境）🐳
Docker 部署提供更好的隔离性和可移植性，适合生产环境。
适合人群：
✅ 有Docker基础的开发者
✅ 需要多实例部署（测试、生产分离）
✅ 需要频繁迁移/备份
✅ 追求最佳实践的高级用户
💡 新手提示
：如果不懂Docker，建议先用方案一，熟悉后再来！
📦 步骤 1：安装 Docker
# 下载并执行 Docker 安装脚本
curl-fsSL https://get.docker.com -o get-docker.sh
sudosh get-docker.sh
# 将当前用户添加到 docker 组（避免每次 sudo）
sudousermod-aGdocker$USER
# 重新登录或执行以下命令使组权限生效
newgrp docker
# 验证安装
docker--version
docker compose version
📦 步骤 2：克隆仓库
# 克隆仓库
git clone https://github.com/openclaw/openclaw.git ~/openclaw
cd ~/openclaw
# 查看项目结构
ls-la
📦 步骤 3：运行自动设置脚本
# 执行自动设置脚本
./docker-setup.sh
脚本会自动完成：
构建 Gateway Docker 镜像
运行初始化向导
生成访问令牌并保存到
.env
文件
启动服务
高级选项：
# 安装额外的系统包（如 ffmpeg）
exportOPENCLAW_DOCKER_APT_PACKAGES="ffmpeg build-essential"
./docker-setup.sh
# 添加额外的挂载目录
exportOPENCLAW_EXTRA_MOUNTS="$HOME/projects:/home/node/projects:rw"
./docker-setup.sh
# 持久化整个容器家目录
exportOPENCLAW_HOME_VOLUME="openclaw_home"
./docker-setup.sh
📦 步骤 4：查看生成的配置
# 查看生成的 .env 文件
cat .env
# 输出示例：
# OPENCLAW_GATEWAY_TOKEN=your-generated-token-here
⚠️ 保存这个令牌！
访问控制面板需要用到。
📦 步骤 5：启动服务
# 启动所有服务
docker compose up -d
# 查看运行状态
docker compose ps
# 查看日志
docker compose logs -f openclaw-gateway
📦 步骤 6：访问控制面板
# 获取虚拟机 IP 地址
ip addr show |grep inet
# 或
hostname-I
在浏览器中访问：
http://<虚拟机IP>:18789/
输入
.env
文件中的
OPENCLAW_GATEWAY_TOKEN
进行认证。
📦 Docker 服务管理
# 停止服务
docker compose stop
# 启动服务
docker compose start
# 重启服务
docker compose restart
# 查看日志
docker compose logs -f openclaw-gateway
# 进入 CLI 容器
docker compose run --rm openclaw-cli bash
✅ Docker 部署完成！
Docker vs 安装脚本对比：
| 对比项 | 安装脚本 | Docker |
|-------|---------|--------|
| 部署速度 | ⚡ 快 | 稍慢（需构建镜像） |
| 隔离性 | 一般 | ✅ 完全隔离 |
| 可移植性 | 差 | ✅ 极强 |
| 资源占用 | 低 | 稍高 |
| 学习曲线 | ⭐ 平缓 | ⭐⭐ 需要Docker知识 |
🎓 专业建议
：生产环境强烈推荐Docker，多实例管理、备份恢复都更方便！
🔒 生产环境安全配置（强烈推荐）
生产环境部署请务必完成以下安全配置，保护你的AI助理！
防火墙配置
只开放必要端口，关闭其他所有访问：
# 安装 ufw（如果没有）
sudoaptinstall-y ufw
# 默认拒绝所有入站连接
sudo ufw default deny incoming
# 允许 SSH（避免自己被锁在外面）
sudo ufw allow 22/tcp
# 允许 OpenClaw 控制面板（可选，按需）
sudo ufw allow 18789/tcp
# 允许 OpenClaw Gateway（通常不需要公网访问）
# sudo ufw allow 18792/tcp
# 启用防火墙
sudo ufw enable
# 查看状态
sudo ufw status
重要提示
不要
在公网直接暴露 18792（Gateway端口）！
只开放控制面板端口 18789，并且要配置访问令牌。
HTTPS 配置（Let's Encrypt）
如果你有域名，强烈建议配置HTTPS，保护数据传输安全：
# 安装 certbot
sudoaptinstall-y certbot python3-certbot-nginx
# 如果使用 Nginx 反向代理
sudo certbot --nginx-d your-domain.com
# 自动续期
sudo certbot renew --dry-run
Nginx 反向代理配置示例：
server{
listen80;
server_name your-domain.com;
location /{
proxy_pass http://127.0.0.1:18789;
proxy_http_version 1.1;
proxy_set_header Upgrade $http_upgrade;
proxy_set_header Connection 'upgrade';
proxy_set_header Host $host;
proxy_cache_bypass$http_upgrade;
}
}
访问令牌管理
最佳实践：
# ✅ DO: 使用强令牌（至少16位随机字符）
# ✅ DO: 定期更换令牌（建议每3个月）
# ✅ DO: 不要在公网分享 .env 文件
# ✅ DO: 使用环境变量存储敏感信息
# ❌ DON'T: 使用简单密码如"123456"
# ❌ DON'T: 将令牌写在代码里
# ❌ DON'T: 在 GitHub 上提交 .env 文件
生成强令牌：
# 生成随机令牌
openssl rand -hex16
日志审计
定期检查异常访问：
# 查看最近24小时的日志
openclaw gateway logs --since 24h
# Docker 部署
docker compose logs --since 24h openclaw-gateway
# 查看系统登录日志
sudo lastb |head-20
定期备份
# 创建备份脚本
cat> ~/backup-openclaw.sh <<'EOF'
#!/bin/bash
# 每天凌晨3点自动备份
tar -czf ~/openclaw-backup-$(date +%Y%m%d).tar.gz ~/.openclaw/
# 保留最近7天的备份
find ~/ -name "openclaw-backup-*" -mtime +7 -delete
EOF
chmod +x ~/backup-openclaw.sh
# 添加到 crontab（每天凌晨3点执行）
crontab-e
# 添加这一行：
03 * * * ~/backup-openclaw.sh
✅ 部署后安全检查清单
在正式使用前，请确认以下项目：
防火墙已启用，只开放必要端口
控制面板访问令牌已设置（强密码）
Gateway 端口（18792）未暴露到公网
（可选）HTTPS 已配置
（可选）定期备份任务已设置
日志审计机制已建立
全部打勾后，你的AI助理才算真正安全！
✅
💬 配置消息渠道
Telegram
# 1. 在 Telegram 中找到 @BotFather
# 2. 发送 /newbot 创建机器人
# 3. 获取 BOT TOKEN
# 添加 Telegram 渠道
openclaw channels add--channel telegram --token"你的BOT_TOKEN"
# Docker 部署使用：
docker compose run --rm openclaw-cli channels add--channel telegram --token"你的BOT_TOKEN"
Discord
# 1. 访问 https://discord.com/developers/applications
# 2. 创建应用程序，添加 Bot
# 3. 获取 BOT TOKEN
# 添加 Discord 渠道
openclaw channels add--channel discord --token"你的BOT_TOKEN"
飞书（Feishu）
# 1. 创建飞书应用，获取凭证
# 2. 配置事件订阅
openclaw channels add--channel feishu --token"你的应用凭证"
🔧 故障排查：90%的新手都会遇到的坑
💆‍♂️ 别慌，这些问题我都遇到过！
根据社群数百位部署经验，这里是最常见的5个问题和解决方案。
遇到问题先来这里找，90%都能直接解决！
问题 1：Node.js 版本过低
错误信息：
Node version too low. Required: >=22
解决方案：
# 卸载旧版本
sudoapt remove nodejs npm
# 安装 Node.js 22
curl-fsSL https://deb.nodesource.com/setup_22.x |sudo-Ebash -
sudoaptinstall-y nodejs
# 验证
node-v
问题 2：找不到 openclaw 命令
错误信息：
command not found: openclaw
解决方案：
# 查找安装位置
npm prefix -g
# 添加到 PATH
exportPATH="$(npm prefix -g)/bin:$PATH"
# 永久生效
echo'export PATH="$(npm prefix -g)/bin:$PATH"'>> ~/.bashrc
source ~/.bashrc
问题 3：端口已被占用
错误信息：
EADDRINUSE: address already in use :::18792
解决方案：
# 查找占用端口的进程
sudolsof-i :18792
# 杀死进程
sudokill-9<PID>
# 或修改配置使用其他端口
nano ~/.openclaw/config.yaml
问题 4：Docker 权限问题
错误信息：
permission denied while trying to connect to the Docker daemon
解决方案：
# 将用户添加到 docker 组
sudousermod-aGdocker$USER
# 重新登录或
newgrp docker
# 验证
dockerps
问题 5：内存不足
错误信息：
JavaScript heap out of memory
解决方案：
# 增加 Node.js 内存限制
exportNODE_OPTIONS="--max-old-space-size=4096"
# 或创建 swap 文件
sudo fallocate -l 2G /swapfile
sudochmod600 /swapfile
sudomkswap /swapfile
sudoswapon /swapfile
❓ 常见问题
Q1：我应该选择哪种部署方案？
新手/快速测试
→ 方案一（安装脚本）
生产环境/多实例
→ 方案二（Docker）
完全小白
→ 腾讯云镜像部署（见文末）
Q2：最低配置要求是什么？
CPU
：1 核心（推荐 2 核心）
内存
：2GB（推荐 4GB+）
磁盘
：10GB 可用空间
Q3：如何更新 OpenClaw？
# 方案一
npm update -g openclaw@latest
openclaw gateway restart
# 方案二（Docker）
cd ~/openclaw
git pull origin main
docker compose down
./docker-setup.sh
docker compose up -d
Q4：如何备份配置和数据？
# 备份配置和数据
tar-czf openclaw-backup-$(date +%Y%m%d).tar.gz ~/.openclaw/
# 恢复
tar-xzf openclaw-backup-YYYYMMDD.tar.gz -C ~/
Q5：支持哪些操作系统？
✅ Ubuntu 20.04 / 22.04 / 24.04
✅ Debian 11 / 12
✅ CentOS 8+ / Rocky Linux / AlmaLinux
✅ macOS（通过 Docker 或 Homebrew）
⚠️ Windows（仅 WSL2）
🌟 超简单推荐：腾讯云一键部署
如果你不想手动配置，腾讯云提供了一键镜像，5分钟完成部署！
免费领云服务器：
腾讯云云服务器免费领
详细教程：
玩转Lighthouse｜云上Moltbot一键秒级部署指南
云上Moltbot接入飞书完全指南
云上Moltbot接入钉钉完全指南
💬 你的部署故事
互动讨论
🎉
成功部署了？
评论区晒出你的AI助理截图！
💥
遇到坑了？
说说你遇到了什么问题，我来帮你！
📊
投票选择
：你更喜欢哪种部署方式？
A. 本地部署（简单直接）
B. 虚拟机部署（24/7在线）
C. 云服务器（最省心）
D. 还没开始，准备试试
💬
评论区见
：分享你的部署经验，优质评论将获得作者一对一技术支持！
💬 加入用户交流群
⚡
限时开放
：社群正在快速成长中，现在加入即可成为早期核心成员！
扫码下方二维码，立即加入 OpenClaw 用户交流群
在这里，你可以：
🎓
获取新手入门指南
，快速搭建你的专属 AI 助手
💡
分享使用技巧
，学习其他人的创意配置
🤝
技术交流
，遇到问题有人帮
🎁 写在最后
💡
金句收藏
：
"本地部署 = 把JARVIS锁在房间里，云部署 = 给JARVIS一个云端基地"
"选择不对，努力白费"
"一次性配置，终身受益"
本地部署 vs 云端部署，选择错了不仅浪费资源，还会让你错过重要消息！
记住这3个原则：
1️⃣
24/7必须在线
→ 选虚拟机/云部署
2️⃣
团队协作共享
→ 选虚拟机/云部署
3️⃣
到处都要访问
→ 选虚拟机/云部署
10分钟配置，终身受益！从今天起，你的AI助理真正属于你了！
觉得有用？点个「在看」让更多人避开部署坑！
有疑问？评论区留言，我会一一解答
成功部署了？晒出你的AI助理截图，让大家都看看！
🤖
关注我，解锁更多AI自动化实战技巧！
"AI 的未来不是更强大的模型，而是更懂你的助手。"
—— OpenClaw 设计理念
现在就开始，打造你的专属 AI 助手吧！
🚀