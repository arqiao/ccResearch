# 个人自动化助理系统 - 架构设计

> 创建时间：2026-02-25
> 定位：顶层设计文档，描述系统目标、架构和子系统职责

---

## 一、系统定位与目标

构建一个以 AI 为核心的**个人自动化助理系统**，目标是让 AI 真正融入日常工作流，而不只是一个问答工具。

### 核心需求

| 需求 | 描述 |
|-----|------|
| 知识管理 | 技术经验自动沉淀，跨项目复用，避免重复踩坑 |
| 开发协作 | 本地开发与服务器自动化协同，任务状态随时可查 |
| 日常答疑 | 通过飞书随时查询进度、触发任务、获取信息 |

### 设计原则

- **自动化优先**：能自动完成的不依赖人工干预
- **知识沉淀**：解决问题后立即记录，不依赖记忆
- **随时可达**：移动端（飞书）也能查询和操作
- **自主可控**：核心组件自托管，不依赖第三方云服务

---

## 二、整体架构

```
┌─────────────────────────────────────────────────────────┐
│                   个人自动化助理系统                      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│   【接入层】                                             │
│   ┌──────────────┐              ┌──────────────┐        │
│   │ Claude Code  │              │  飞书群消息   │        │
│   │ （本地开发）  │              │ （移动端入口）│        │
│   └──────┬───────┘              └──────┬───────┘        │
│          │                            │                 │
│   【执行层】                           │                 │
│   ┌──────▼───────────────────────────▼───────┐          │
│   │           OpenClaw Gateway               │          │
│   │         （服务器，7×24 在线）             │          │
│   │  - 响应飞书消息，执行 Skills              │          │
│   │  - 读写知识库，commit push               │          │
│   │  - 定时任务，账户切换                    │          │
│   └──────────────────┬───────────────────────┘          │
│                      │                                  │
│   【存储层】          │                                  │
│   ┌───────────────────▼──────────────────────┐          │
│   │              GitHub                      │          │
│   │  ┌─────────────────┐ ┌────────────────┐  │          │
│   │  │arqiao-shared-   │ │  ccResearch    │  │          │
│   │  │knowledge（知识库）│ │（研究项目/任务）│  │          │
│   │  └─────────────────┘ └────────────────┘  │          │
│   └──────────────────────────────────────────┘          │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 三、核心子系统职责

### 3.1 Claude Code（本地）

- 主动式开发：写代码、调研、文件操作
- 解决问题后将经验 commit 到 arqiao-shared-knowledge
- 通过 ccResearch 管理各研究项目任务清单

**特点**：需要访问本地文件系统，只在工作时运行

### 3.2 OpenClaw Gateway（服务器）

- 被动式自动化：响应飞书消息，执行 Skills
- 读取 ccResearch 任务清单，回答进度查询
- 解决问题后直接 commit push 到 arqiao-shared-knowledge
- 定时同步仓库，管理账户切换

**特点**：7×24 在线，无人值守运行

### 3.3 arqiao-shared-knowledge（知识库）

- 存储技术解决方案（solutions/）、踩坑记录（pitfalls/）、自定义 Skills
- **CC 和 OpenClaw 均可读写**，解决问题后直接 commit push，无需人工 review
- 通过 GitHub 在本地和服务器之间同步

### 3.4 ccResearch（研究项目仓库）

- 存储各研究项目的任务清单（task-list.md）和过程文档
- **只由 CC 本地写入**，服务器只读（cron 定时 pull）
- OpenClaw 通过读取本地文件回答进度查询，不写入此仓库

### 3.5 飞书群

- 移动端入口，随时查询项目进度、触发任务
- OpenClaw 监听消息，调用对应 Skills 响应

---

## 四、两端协作流程

### 知识沉淀流程

```
CC 或 OpenClaw 解决问题
        ↓
写入 arqiao-shared-knowledge（solutions/ 或 pitfalls/）
        ↓
git commit push → GitHub
        ↓
另一端 git pull 获取最新知识
```

### 任务进度查询流程

```
飞书发消息："architecture 项目进度？"
        ↓
OpenClaw 读取本地文件
/home/openclaw/workspace/ccResearch/architecture/task-list.md
        ↓
回复进度摘要
```

### 本地开发同步流程

```
CC 本地完成开发，push ccResearch → GitHub
        ↓
服务器 cron 每天凌晨 3 点 git pull
紧急时：飞书发消息触发立即同步
```

---

## 五、技术选型

| 组件 | 选择 | 原因 |
|-----|------|------|
| 自动化引擎 | OpenClaw | 开源自托管，支持飞书，Skills 生态丰富 |
| 服务器 | 阿里云轻量服务器 | 国内访问快，过渡期使用；后续迁移树莓派 |
| 消息入口 | 飞书 | 官方 API 支持好，移动端体验佳 |
| 知识存储 | GitHub（私有仓库） | 版本控制，多端同步，免费 |
| Claude API | zjz-ai 中转 | 国内访问，替代官方 api.anthropic.com |

### 后续演进

当前云服务器为过渡方案，计划迁移到树莓派（家庭自托管，零成本长期运行），通过 Tailscale 实现内网穿透。

---

## 六、文档索引

| 文档 | 说明 |
|-----|------|
| `architecture.md` | 本文档，顶层架构设计 |
| `design.md` | 实施细节：仓库设计、Key 管理、服务器配置 |
| `task-list.md` | 任务清单，跟踪所有待办事项 |
| `guides/deploy-cloud-server.md` | 云服务器部署指南 |
| `guides/deploy-raspberry-pi.md` | 树莓派部署指南 |
| `guides/client-setup.md` | 客户端配置指南 |
| `guides/feishu-integration.md` | 飞书集成指南 |
| `guides/openclaw-tools-reference.md` | OpenClaw Gateway HTTP API 参考 |
| `guides/mobile-remote-control.md` | 手机远程控制方案（待定） |
| `known-limitations.md` | 已知限制与注意事项 |
| `references/multi-model-switching.md` | 多模型切换方案（早期设计参考） |
